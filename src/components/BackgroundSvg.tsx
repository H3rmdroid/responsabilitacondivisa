import { motion, useScroll, useTransform } from "motion/react";
import { useMotionValueEvent } from "framer-motion";
import { useRef, useEffect, useState, RefObject } from "react";
import { useIsDesktop } from "../hooks/useIsDesktop";
import { getBackgroundLayout } from "../layout/backgroundLayout";

interface BackgroundSvgProps {
  storieCambiamentoRef: RefObject<HTMLDivElement>;
}

export function BackgroundSvg({ storieCambiamentoRef }: BackgroundSvgProps) {
  const containerRef = useRef<HTMLDivElement>(null);
  const isDesktop = useIsDesktop();
  const { scrollY } = useScroll();
  const [viewportHeight, setViewportHeight] = useState(
    typeof window !== "undefined" ? window.innerHeight : 0
  );

  const { backgroundSvg: layoutConfig } = getBackgroundLayout(isDesktop);
  
  // Scroll progress per i path dietro al titolo (primi 200vh circa)
  const { scrollYProgress: titleProgress } = useScroll({
    target: containerRef,
    offset: ["start start", "end start"]
  });
  // Scroll progress per il path laterale: ora agganciato al container del background
  const { scrollYProgress: lateralProgress } = useScroll({
    target: containerRef,
    offset: ["start start", "end start"],
  });
  // Progress lineare per le animazioni dei path
  const warpedTitleProgress = titleProgress;

  useEffect(() => {
    const handleResize = () => {
      setViewportHeight(window.innerHeight);
    };
    window.addEventListener("resize", handleResize);
    return () => window.removeEventListener("resize", handleResize);
  }, []);

  // Opacit√† globale dell'SVG che va da 0 a 1 (pi√π veloce)
  const svgOpacity = useTransform(warpedTitleProgress, [0, 0.08], [0, 1]);

  // Path dietro al titolo - si completano pi√π velocemente (40% del tempo invece di 60%)
  // Ordinati dall'alto verso il basso in base alla coordinata Y iniziale
  const titleDurationScale = isDesktop ? 1.35 : 1;
  const titleEndCap = isDesktop ? 0.65 : 0.4;
  const createTitlePathAnimation = (delay = 0, duration = 0.5) => {
    const effectiveDuration = duration === 0 ? 0.5 : duration;
    const adjustedDuration = effectiveDuration * titleDurationScale;
    const endPoint = Math.min(delay + adjustedDuration, titleEndCap);
    return useTransform(
      warpedTitleProgress,
      [delay, endPoint],
      [0, 1]
    );
  };

  // Path laterale lungo - animazione basata sulla posizione di "Storie di cambiamento"
  // Input normalizzati (0-1) per evitare dipendenza dai pixel di scroll assoluti
  const lateralInput = isDesktop
    ? [0, 1]
    : [0, 0.285, 0.649, 0.86, 1];
  const lateralOutput = isDesktop
    ? [0, 1]
    : [0, 0.054, 0.3, 0.84, 1];
  const lateralPathLength = useTransform(
    lateralProgress,
    lateralInput,
    lateralOutput
  );

  // Debug: percentuale di scroll della sezione e avanzamento del path laterale
  useEffect(() => {
    console.log("üìè Background section progress (init):", (lateralProgress.get() * 100).toFixed(1), "%");
    console.log("üßµ Lateral Path Length (init):", lateralPathLength.get().toFixed(3));
  }, [lateralProgress, lateralPathLength]);
  useMotionValueEvent(lateralProgress, "change", (latest) => {
    console.log("üìè Background section progress:", (latest * 100).toFixed(1), "%");
  });
  useMotionValueEvent(lateralPathLength, "change", (latest) => {
    console.log("üßµ Lateral Path Length Value:", latest.toFixed(3));
  });

const debugColors = [
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
    "#fa0000ff",
]; 
   /* const debugColors = [
    "#ff4d6d",
    "#ff9f1c",
    "#2ec4b6",
    "#1d4ed8",
    "#a855f7",
    "#f97316",
    "#14b8a6",
    "#ef4444",
    "#22c55e",
    "#eab308",
    "#3b82f6",
    "#9333ea",
    "#f43f5e",
    "#0ea5e9",
    "#84cc16",
  ]; */

  const debugCss = "";

  return (
    <div
      ref={containerRef}
      style={{
        position: "absolute",
        top: layoutConfig.containerTop,
        left: layoutConfig.containerLeft,
        right: layoutConfig.containerRight,
        // Estendiamo l'area di scroll per far completare i path anche nelle sezioni basse
        height: layoutConfig.containerHeight,
        zIndex: 0,
        pointerEvents: "none",
        overflow: "visible",
        outline: "none",
        backgroundColor: "transparent",
      }}
    >
      <motion.div 
        className="sticky top-0 h-screen overflow-visible"
        style={{ opacity: svgOpacity }}
      >
        <svg
          id="background-svg"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 393.34 3325.06"
          style={{
            position: "absolute",
            top: layoutConfig.svgTop,
            left: layoutConfig.svgLeft,
            width: layoutConfig.svgWidth,
            maxWidth: layoutConfig.svgMaxWidth,
            height: "auto",
            transform: layoutConfig.svgTransform,
            zIndex: 0,
            pointerEvents: "none",
          }}
          preserveAspectRatio={layoutConfig.svgPreserveAspectRatio}
        >
          <defs>
            <style>
              {`#background-svg .cls-1 {
                fill: none;
                stroke: #232322;
                stroke-miterlimit: 10;
                stroke-width: 1px;
              }
              ${debugCss}
              `}
            </style>
          </defs>
          
          {/* PATH DIETRO AL TITOLO - Ordinati dall'alto verso il basso (Y pi√π piccolo = pi√π in alto) */}
          <motion.path
            className="cls-1"
            d="M46.99.1c-.49,5.34-.89,12.11-1.33,21.7,0,0-.24,4.54-.31,8.45-.47,25.08-.71,37.6,4.74,50.1,6.69,15.37,22.53,34.67,37.27,33.38,7.67-.67,13.77-5.92,18.21-2.56,1.82,1.38,3,3.98,2.49,6.14-1.36,5.65-14.19,8.03-23.55,5.69-5.72-1.4-8.18-4.07-8.98-5.03-.91-1.09-3.02-3.58-2.91-7.16.02-.51.18-4.23,2.78-6.43,1.4-1.18,2.45-1.05,3.82-2.69.53-.64,1.51-1.8,1.47-3.29-.02-1.16-.64-1.31-1.6-3.51-.58-1.36-1.02-2.38-1.02-3.76.02-1.91.93-3.31,1.11-3.58.24-.36,1.71-2.51,4.18-2.71,2.58-.22,4.74,1.87,5.69,3.54,1.33,2.33.31,3.8,1.49,4.91,2.25,2.11,8.83-.36,8.94-2.36.09-1.65-4.78-1.89-5.96-5.34-.82-2.4.67-4.91,1.2-5.83,4.71-7.98,23.39-8.12,26.57-8.12,19.72.04,29.6,4.11,43.83,6.34,14.5,2.27,24.66,1.22,44.9-.85,52.33-5.34,82.75-24.22,101.98-7.96.16.13.27.22.31.27.91.78,3.05,2.94,3.31,5.94.2,2.2-.69,3.91-2.13,6.36-5.34,9.07-7.87,10.65-9.34,15.83-.53,1.85-1.11,3.85-.8,6.49.85,7.29,7.41,11.52,9.76,13.03,1.4.89,3.2,2.07,3.85,1.51.85-.71-.24-4.54-2.76-5.8-2.76-1.38-6.2.8-7.87,1.85-3.2,2.02-4.85,4.58-7.07,8.12-2.76,4.4-2.51,5.4-5.52,10.3-.56.91-1.05,1.65-1.56,2.4-1.73,2.56-3.2,4.49-3.31,4.63-2.58,3.4-5.31,10.39-6.07,12.56-3.29,9.36-4.96,29.98-3.6,52.26.27,4.31,1.13,17.08,4,33.33.09.44.13.69.16.85,6.52,36.87-.98,132.69-.98,132.69-2,25.55-.6,62.96,16.63,110.92,1.82,5.18,4.18,13.05,5.27,22.86,2.36,21.08-3.51,28.82,2.87,39.32,5.09,8.34,15.21,13.92,23.06,12.83.53-.07,5.63-.85,5.8-2.6.18-1.62-3.78-4.31-6.67-3.22-.29.11-1.11.47-1.73,1.33-1.45,2.02-.73,5.47.85,7.72,2.05,2.94,4.6,2.45,6.14,5.56.78,1.6.98,3.49.47,3.76-.67.36-1.69-2.51-4.4-3.42-3.29-1.11-5.72,1.8-7.67.47-1.42-.98-.42-2.69-1.93-5.47-1.09-2.02-3.71-4.94-6.65-4.54-2.18.29-3.96,2.27-4.49,4.2-.49,1.76.07,3.34.47,4.43,1.05,2.91,2.71,3.6,2.4,4.76-.36,1.36-2.85,1.18-4.98,2.22-2.11,1.05-4.47,3.52-5.58,10.04"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M130.74.1c8.16,60.66,5.72,87.88,3.05,109.78-.82,6.85-3.47,25.8-2.91,51.53.36,16.3,1.76,23.86,2.91,39.07.47,6.2,1.58,22.44.02,67.78-2.67,77.79-8.49,93.95,3.27,120.31,4.05,9.1,16.68,33.45,25.8,31.96.85-.13,4.78-1,4.94-2.62.13-1.45-2.69-3.45-5.31-3.22-1.98.18-3.25,1.56-3.51,1.87-1.22,1.36-1.49,2.89-1.62,3.82-.56,3.65.85,8.23,4.36,11.03.85.67,3.42,2.76,6.43,2.38,1.11-.13,1.16-.47,3.49-.93,2.13-.42,3.4-.4,3.71-1.16.13-.38-.11-.53-.11-1.89,0,0,0-.62.04-1.18.07-.96.18-2.33.89-3.56.53-.91,1.65-2.11,3.38-2.51,1.91-.44,3.45.4,3.91.67.36.2,1.42.82,2.13,2.11.8,1.45.71,2.94.69,3.51-.04.98-.27,1.29-.18,2.25.04.42.13,1.36.58,2.05.96,1.4,2.85.67,6.43,1.82.62.2,1.85.6,3.16,1.42.18.11,2.36,1.49,3.98,3.89.49.71,4.27,6.45,1.96,11.79-1.91,4.4-6.74,5.67-11.14,6.8-2.36.62-9.83,2.56-11.9-.67-1.11-1.73-.31-4.38.8-5.94,2.56-3.54,7.89-2.87,9.16-2.71,5.09.64,9.83,4.4,11.1,9.12.38,1.38.38,2.56.36,3.09-.18,5.54-4.71,8.63-3.87,9.78.93,1.29,6.49-2.47,9.16-.16.24.2.56.76,1.16,1.87,1.33,2.47,2.11,4.38,2.78,6.05,2.16,5.31,2.49,5.76,2.13,6.16-.89,1.07-4.36-.36-7.23-1.53-3.87-1.6-3.69-2.22-5.94-2.82-3.25-.87-6.23-.2-9.36.47-2.89.6-4.63,1.42-7.87,1.25-1.18-.07-1.8-.09-2.62-.4-2.91-1.07-5.4-4.43-5.09-7.83.24-2.8,2.29-4.56,3.71-5.76,1-.87,3.42-2.69,8.98-3.67,5.8-1.02,10.59-.33,11.88-.11.13.02.24.04.29.04,2.51.44,48.39,8.72,60.91,10.45,21.28,2.94,26.42-1.91,59.15-4.23,18.55-1.31,40.65-1.82,74.4,2.82"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M362.83.1c-1.58,33.93-.13,20.56.36,39.78.82,31.6,2.47,41.58,3.05,72.94.2,11.16.53,40.36-1.51,77.39-2.16,38.69,6.12,77.99.11,116.26-.2,1.27-.89,5.27,1.36,7.69,2.76,2.96,8.12,1.53,15.32.8,4.87-.51,2.8-1.4,11.65-.4"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M.17,76.17c45.83,6.8,64.02,5.92,73.33,3.36.56-.16,7.03-2.09,15.5-1.36,5.94.51,16.48,1.42,19.12,7.92,1.67,4.11-.49,8.92-1.11,10.27-2.65,5.85-7.05,6.38-7.36,11.05-.13,2.2.69,4.98,2.6,6.78,1.31,1.25,2.8,1.71,3.11,1.8,2.58.78,4.03-.27,6.94.69.29.09,1.18.4,2,.93,2.89,1.8,4.74,6.07,4.25,9.74-.73,5.63-7.52,8.74-6.36,10.94.24.47.71.64,1.89,2.27.27.38.73,1,1.16,1.76.98,1.71,1.78,3.11,1.4,3.91-.56,1.13-3.2.4-9.74-.13-4.91-.4-6.58-.29-7.07-1.25-.8-1.56,2.13-3.07,2.76-7.36.11-.8.82-5.51-1.96-7.72-1.4-1.11-3.74-1.58-4.78-.64-1.18,1.07-.33,3.47-.04,5.09,1.6,9.03-9.78,15.97-7.87,19.75,1.62,3.18,11.01,1.27,19.12.44,16.37-1.67,24.22,1.58,39.16,3.29,21.33,2.42,42.81-6.98,76.01-5.27,30.82,1.58,84.24,15.79,94.82,14.03,1.82-.31,8.81-2.16,11.65-6.16.4-.56,1.58-2.33,2.56-8.56,1.71-10.96-.73-13.3,1.69-19.39,1.45-3.65,2.11-2.33,5.69-9.1,3.42-6.45,4.49-10.83,4.85-12.41.29-1.33.78-3.51.98-6.43.27-4-.27-5.96.53-9.94.56-2.74,1.22-3.8,2.05-4.51.82-.71,1.49-.78,2.62-1.8.87-.78,2.16-1.96,1.98-2.89-.31-1.53-4.51-1.78-9.63-2.07-4.27-.24-5.47.09-6.23.96-.6.69-.49,1.22-.96,4.07-.11.71-.6,3.49-1.2,5.54-.73,2.51-1.2,2.33-2.82,6.03-1.96,4.45-2.02,6.43-3.49,6.76-.87.2-1.67-.29-2.96-1.13-.42-.27-3.4-2.25-4.29-4.65-1.4-3.85,3.47-6.52,6.8-15.19,1.53-3.98,2.91-7.74,1.51-11.81-1.07-3.09-3.76-6.27-7.32-7.03-2.02-.42-4.94-.2-5.49,1.16-.71,1.76,2.87,4.71,3.96,5.6,8.47,6.98,22.26,5.6,24.84,5.36,12.21-1.13,23.06-1.74,48.79,1.28"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M.17,161.5c8.58-1.56,13.89-1.85,18.56-1.85,8.58,0,25.68,1.02,38.2.16,1.02-.07,9.01-.71,11.07-4.71.13-.27.4-.85.91-2.02,1.58-3.51,1.67-4.09,2.47-5.83,3.16-6.89,4.23-8.05,3.85-10.47-.51-3.16-2.71-3.58-3-7.32-.22-2.98,1.05-4.58.27-5.27-1.33-1.18-6.03,1.69-8.38,3.62-2.07,1.69-8.01,7.34-9.32,25.86-.58,8.09-.42,20.97,4.49,36.56,3.71,16.37,4.34,29.78,4.18,39.16-.29,18.44-3.62,24.77-2.8,44.92.71,17.15,3.25,15.63,2.76,28.33-.53,13.43-1.42,35.67-13.65,43.43-.78.49-7.83,4.87-10.85,11.34-1.38,2.96-.78,4-.53,4.34.8,1.09,2.91,1.36,4.36.38.93-.62,1.58-1.78,1.49-2.94-.16-2.07-2.54-3.11-2.94-3.27-3.85-1.6-8.52,1.78-8.92,2.09-2.65,1.98-3.16,3.96-4.38,3.74-1.47-.27-.91-3.2-3.38-5.85-2.29-2.45-4.63-1.93-5.07-3.62-.53-2.02,2.71-3.09,3.09-6.47.24-2.29-.85-5.45-3.49-6.49-2.36-.93-5.36.04-6.52,1.87-1.42,2.25.29,5.18-1.09,6.05-.87.56-2.18-.18-2.42-.31-2.25-1.27-3.02-4.94-2.42-7.83.93-4.58,5.43-6.38,4.69-7.98-.51-1.09-2.58-.27-5.34-1.93-.64-.38-3.16-1.91-3.11-3.82.07-2.27,3.76-4.69,6.72-3.85,2.27.64,4.14,3.22,3.51,4.6-.53,1.25-2.89,1.22-3.18,1.22-3.45-.04-5.65-3.49-5.96-4"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M393.17,164.65c-33.96,5.25-50.92,5.61-64.84,5.88-4.96.09-25.44.38-26.95-5.38-.24-.91-.16-2.6.73-3.87,1.31-1.8,3.49-1.58,8.32-2.67,4.29-.96,6.43-1.45,7.54-2.65,1.93-2.07.47-3.51,2.16-10.39.18-.73.62-2.49-.27-3.8-.07-.11-.69-1.02-1.2-.89-1.07.27.56,4.74-1.67,7.94-1.11,1.6-3.16,2.82-5.45,2.8-2.16-.04-4.43-1.22-5.4-3.18-1.53-3.05.64-6.8.96-7.32.98-1.69,1.91-2.07,2.02-3.51.11-1.65-1.07-1.98-1.27-3.82-.29-2.78,2.11-4.89,1.6-5.34-.29-.27-1.29.24-2.22.98-3.36,2.71-2.47,6.2-4.85,9.32-1.82,2.38-4.94,3.78-7.16,3.78-5.89,0-10.9-9.25-13.01-15.28-7.81-22.17,11.27-35.05,7.05-64.45-.6-4.14-1.67-8.81-1.56-16.34.18-10.96,2.78-19.84,4.89-25.53L299.03.1"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M.17,241.38c19.64,1.51,50.72,3.45,88.46,3.94,67.29.89,76.28-3.87,137.32-2.05,45.79,1.36,56.86,4.51,100.92,3.91,30.71-.4,49.72-1.29,66.31-2.86"
            style={{ pathLength: createTitlePathAnimation(0, 0)}}
          />
          <motion.path
            className="cls-1"
            d="M.17,314.56c56.46,5.47,102.31,4.18,134,1.85,52.99-3.89,106.23,5.96,159.33,4.65,4.63-.11,17.99-.58,22.77,6.87,2.38,3.71,2.47,9.03,6.49,10.43,1.47.51,3.65.58,4.94-.73,1.6-1.6,1.56-4.89-.11-6.12-1.6-1.18-4.23-.16-5.65,1.13-3,2.69-2.25,8.01-1.62,11.96,1.65,10.34,6.23,14.01,4.36,16.57-1.71,2.33-7.56,2.05-11.14-.89-3.29-2.69-4.94-7.81-3.2-10.05,1.47-1.89,4.38.51,9.83-1.56,1.8-.69,2.58-1.36,5.36-2.22,1.85-.58,3.05-.93,4.69-1.07,3.8-.27,5.96,1.07,7.05-.16.31-.33.33-.6.49-1.53.33-1.93,1.18-5.27,2.94-6.36,1.6-1,4.03-1.11,5.69,0,2.47,1.65,2.31,5.23,2.22,6.85-.07,1.27-.4,2.36-.4,2.36-.58,2.11-1.36,2.74-1.11,3.6.31,1.16,2.09,1.56,2.89,1.8,5.83,1.65,9.47,7.67,9.94,8.43,2.11,3.47,3.34,8.9,1.05,11.21-.07.07-1.38,1.36-2.8,1.02-2.51-.56-1.85-5.23-4.51-8.43-4.03-4.83-14.5-4.98-17.21-.96-1.22,1.82-1.11,4.89.31,6.23,1.45,1.36,3.25-.07,5.92,1.33,2.25,1.18,1.82,2.62,4.09,4.14,3.22,2.16,6.18.67,6.8,1.98.78,1.62-3.36,5.89-7.92,8.52-3.85,2.22-7.87,3.18-7.72,3.96.07.27.62.38,1.09.44,3.51.51,6.18.91,9.3-.49,2.94-1.33,4.47-3.45,6.36-2.74.11.04.18.07.31.13,1.47.76,2.42,2.71,6.94,8.58,1.82,2.36,2.8,3.54,3.14,3.98,7.98,10.45,7.58,78.12,7.58,87.35,0,8.54.4,21.62,2.56,37.8"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M79.66,398.8c-3.38-.07-14.14.13-22.9,7.85-8.56,7.56-10.1,17.72-10.79,22.39-.29,1.93-.85,6.23.51,16.95,1.56,12.41,3.91,19.77,5.74,27.31,0,0,4.11,17.1,4.54,36.29.22,9.52-.42,23.13-4.47,39.52"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M268.42,399.18c-24.39-1.87-44.23-1.49-57.6-.85,0,0-87.28,4.31-126.29,1.02-7.34-.62-14.3-2.02-18.75-7.03-1.4-1.58-2.49-3.45-6.27-7.87-3.07-3.6-5.63-6.2-6.54-7.12-6.69-6.74-13.52-13.7-17.03-11.76-1.65.91-1.96,3.74-5.09,4.91-1.69.62-2.87.27-3.2,1-.53,1.18,2.42,2.47,3.58,5.6,1.38,3.8-.73,8.05-1.33,9.21-1.96,3.89-4.56,4.85-4.09,6.94.24,1.05.96,1.09,2.78,3.65,1.38,1.96,2.09,2.94,1.82,3.6-.4,1-2.42.98-9.23.73-7.67-.29-8.45-.4-8.87-1.13-1.78-3.07,6.47-11.05,5.31-12.19-.42-.4-1.56.56-2.33,0-1.42-1,.38-5.65,0-5.78-.47-.16-1.47,5.98-5.8,8.96-4.45,3.05-8.25,1.07-8.96,3.2-.53,1.6,1.27,3.82.47,5.4"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M393.17,400.98c-12.81-1.78-17.19-2.16-24.77-2.13-9.74.04-14.61.07-17.37.62-5.72,1.16-12.25,3.54-19.95,1.58-1.33-.33-2.18-.67-2.38-.76-4.63-1.87-10.47-6.56-10.39-12.34.02-2.22.93-3.85,1.8-5.47,2.96-5.38,7.65-7.12,7.41-7.54-.31-.56-8.83.64-12.19,7.23-3.11,6.05.07,12.3.33,12.83,1.96,3.69,4.2,4.58,4,5.63-.42,2.16-11.23,2.96-51.26-1.42"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M221.34,553.64c7.32-29.54,7.41-53.09,6.03-69.33-1.47-17.48-3.05-15.01-6.96-43.33-4.2-30.49-2.78-39.93-7.61-65.71-.62-3.28-1.87-9.46-3.07-18.29-5.74-41.67-3.62-68.08-2.51-109.8.44-16.85,0-14.33.36-45.61.22-19.71.49-36.88.62-44.6.85-46.02,4.2-73.12,4.36-111.46.09-19.29,2.4-11.85-1.31-45.41"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M148.49,582.15c-8.27-15.63-11.23-28.75-12.43-37.74-1.8-13.61.62-16.59-2.6-30.09-2.2-9.27-4.83-14.1-7.92-28.58,0,0-2.56-12.05.73-20.9.69-1.87,1.6-3.6,1.6-3.6,1.27-2.13,2.33-3.85,3.27-5.05,5.05-6.47,19.17-20.77,21.37-19.01.36.27.58,1.07,2.18,3.07.47.58,2.09,2.58,4.6,4.09,3.69,2.22,5.6,1.2,6.98,3.31.49.76.78,1.42,1.78,3.14.31.53.73,1.13,1.36,1.85,1.05,1.18,1.8,1.76,1.62,2.36-.27.89-2.29.64-4.76,1.4-2.11.64-3.45,1.71-5.18,3.09-3.65,2.91-5.47,6.34-6.85,8.98-2.91,5.58-1.76,6.52-4.29,10.1-3.05,4.27-6.34,5.2-5.89,6.58.38,1.22,3.67,1.27,10.23,1.27,6.18,0,7.36-.42,7.72-.87.07-.09.09-.13.09-.16.04-.09-5.18-6.25-7.67-8.07-18.19-13.25-79.3-5.65-79.3-5.65-21.57,0-34.6,6.38-74.96,3.94"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />
          <motion.path
            className="cls-1"
            d="M393.17,617.6c-13.03-.85-13.27-.22-32.73.24-16.08.4-19.24.2-22.55-2.45-7.25-5.8-7.94-9.9-14.52-14.72-1.8-1.33-5.09-3.69-7.14-2.58-.85.47-1.69,1.62-1.51,2.78.2,1.27,1.51,1.89,1.78,2.02.29.13,1.82.78,4.45-.49,4.38-2.11,4.16-5.8,8.01-9.14.73-.62,5.69-4.78,10.87-3.05,3.87,1.29,6.69,5.47,6.49,9.36-.07,1.27-.58,4.89-8.16,9.63-11.16,7-22.9,7.27-24.62,7.29-21.44.2-34.25-2.13-51.24-3.4-21.95-1.62-39.43-.47-50.52.27-15.9,1.07-25.93,2.69-33.13,3.62-44.32,5.67-64.8-5.27-112.46-6.18-16.19-.31-36.15.44-66.02,6.23"
            style={{ pathLength: createTitlePathAnimation(0, 0) }}
          />

          {/* PATH LATERALE LUNGO */}
          <motion.path
            className="cls-1"
            d="M329.75,580.17c3.94,3.16,8.94,3.91,12.65,1.91.47-.24,3.16-1.76,4.31-4.96,1.25-3.49-.18-6.65-1.33-9.21-2.05-4.49-5.67-8.27-6.67-7.72s1.98,4.74.4,9.85c-.85,2.71-2.58,4.4-4.27,6.03-2.54,2.42-5.29,3.89-11.03,6.34-9.07,3.87-9.43,2.49-16.28,5.74-5.67,2.69-7.69,4.69-10.41,3.71-2.29-.82-4.67-3.67-3.96-6.58.6-2.54,3.38-4.4,5.92-4,1.87.29,3.96,1.85,4,3.56.09,3.65-9.12,4.07-11.96,9.32-3.98,7.29,6.52,20.1,8.23,22.3,18.75,23.84,12.21,75.85,11.72,130.16-.51,56.08,6.05,45.52,7.65,114.9,1.62,70.12-4.11,121.89-5.87,139.99-6.09,62.64-9.18,193.63,5.87,497.55,1.89,143.17-8.65,193.54-19.12,212.24-5.11,9.12-21.59,31.11-16.17,53.59,1.6,6.58,6.49,19.66,1.96,23.53-1.4,1.18-4.27,1.91-5.49.8-.93-.85-.78-2.65-.24-3.85,1-2.2,3.67-2.76,4.03-2.85,3.74-.76,5.45,2.31,10.21,1.67.96-.13,1.69-.22,2.49-.71,2.2-1.29,1.73-3.87,3.94-8.92.76-1.73,1.13-2.6,1.8-3.51,1.96-2.6,4.16-3.27,3.98-4.69-.07-.58-.33-.64-1.36-2.4-.24-.4-.47-.91-.69-1.62-.38-1.2-.89-2.78-.31-4.58.56-1.73,1.98-3.29,3.91-3.94.18-.07,2.6-.82,4.94.49,2.09,1.18,2.87,3.34,3.38,4.76.87,2.42.27,3.16,1.11,4.27,1.33,1.76,3.74,1.09,6.58,1.69,6.23,1.31,9.74,7.83,10.47,9.18.87,1.62,3.07,5.69,2.18,10.96-.24,1.45-1.16,6.94-5.31,9.18-3.91,2.11-10.21,1.09-13.32-.04-.82-.29-2.13-.87-3.74-.53-1.87.38-2.13,1.51-4.03,1.87-.27.04-2.8.49-4.34-1.09-1.58-1.65-.96-4.25-.78-4.83.82-2.91,3.62-4.29,5-4.98,4.47-2.2,8.94-1.27,10.83-.85,2.51.56,5.85,1.31,8.36,4.25,3.2,3.71,3.82,9.47,1.89,13.59-2.89,6.18-11.21,7.81-10.85,8.69.2.53,3,.24,5.6-.82.87-.36,1.96-.73,3-1.67.24-.22.31-.31.93-.87.96-.87,1.69-1.49,2.54-1.49,0,0,.76,0,1.53.36,1.58.71,5.07,4.51,5.07,4.51,2.16,2.33,2.36,2.38,3.25,3.58,0,0,1.16,1.58,2.07,3.38,1.78,3.51,2.47,7.92,2.58,8.94.64,6.09,3.02,11.94,5.49,22.95,5.98,26.62,6.16,56.66,6.16,56.66,1.29,54.86-9.63,65.89-10.16,128.89-.02,3.69-.27,35.16-7.32,72.43-.62,3.36-2.2,11.39-5.98,21.42,0,0-12.88,34-36,42.94-.89.36-3.07,1.18-4.16.22-.78-.69-.87-2.13-.42-3.2.02-.07.64-1.53,2.09-1.89,1.6-.4,3.07.85,3.85,1.53,3.29,2.82,3.67,7.32,3.69,7.58.22,3.11-.87,5.94.16,6.45.13.07.27.09.56.07.98-.07,1.67-1.22,4.94-2.13,4.58-1.29,7.05.36,8.47-1.18,1.29-1.38-.49-2.91.67-5.89.31-.78,1.6-3.71,4.91-4.6,2.22-.6,5.05-.18,6.72,1.45,2.51,2.42,1.56,6.72-.2,9.03-1.18,1.53-2.31,1.69-2.36,2.74-.07,1.82,3.29,2,6,5.05,2.42,2.71,1.2,4.2,4.47,8.45,1.49,1.93,2.54,2.65,3,2.94,1.76,1.11,2.71.93,5.52,2,3.05,1.18,4.56,1.78,5.29,3.16,1.07,2,.2,4.98-1.6,5.8-1.27.58-2.31-.22-5.31-.82-3.38-.69-4.38-.16-7.07-.44-6.16-.69-10.41-4.56-11.25-5.38-2.8-2.74-5.78-7.45-4.25-9.14.91-1,3.38-.87,4.83.09,2.42,1.6,1.93,5.58,1.22,7.69-.62,1.85-2.18,2.8-1.67,4.09.16.42.42.62,1.6,1.53,2.13,1.65,3.2,2.47,3.18,2.47,1.53,1.05,6.94,5.58,10.23,11.52,2.49,4.51,4.94,11.9,5.16,15.48.04.62.24,1.71.93,2.96.87,1.56,1.85,1.98,3.51,3.78.58.62,1.4,1.58,2.27,2.87,3.51,5.27,4.07,10.74,4.23,13.48,1.85,30.71-1.31,44.83-1.31,44.83-7.76,34.69,4.91,36.58-1.22,83.57-4.6,35.25-12.32,38.6-10.23,61.87,1.33,15.01,6.67,37.4,11.1,48.48.58,1.45,3.45,8.47,3.38,8.49-.04,0-1.25-2.94-1.22-2.94.09-.04,3.65,11.32,6.45,10.99,1.33-.16,2.56-2.94,1.87-4.87-.85-2.31-4.45-3.34-7.09-3.18-3.38.18-8.36,2.07-9.07,1.51-.09-.07-.56-.49-.73-.76-.13-.18-.22-.36-.22-.36,0-.04-.04-.07-.04-.09-.56-1.05-2-2.56-2.8-3.71-.07-.11-.09-.13-.13-.2-2.31-3.31-8.25-4.91-8.09-6.49.02-.31.27-.44.91-.93,2.05-1.6,3.29-3.8,3.71-5.09.62-1.89.49-4.89-1.53-6.87-2.56-2.49-6.29-1.51-6.58-1.42-2.56.71-4.2,2.85-4.94,3.78-.93,1.2-1.78,2.76-3.8,4.29-.27.2-.49.36-.8.56-2.27,1.36-4.71,1.11-5.34,1.09-3.31-.2-9.67,1.87-13.45,5.18-.71.62-6.52,5.87-5.34,13.1.44,2.69,2.16,7.56,5.83,8.83,2.74.93,7.25.11,11.39,1.58h.07c1.82.62,4,1.4,6.23,1.16,1.22-.13,2.4-.24,3.18-1.16s.96-2.45.78-3.6c0,0,0-.09-.02-.18-.31-1.58-4-6.45-9.74-6.78-5.18-.31-8.74,3.27-9.38,3.94-4.71,4.94-3.49,11.81-3.4,12.25,1.31,6.69,7.14,8.65,6.18,11.43-1.38,4.03-13.94.98-16.61,6.49-.71,1.49-.31,3.31.51,6.94.11.49,2.13,9.21,4.91,9.16,1.45,0,2.89-2.38,3.4-3.47.69-1.45.64-2.49,1.65-3.27.91-.71,2-.67,2.4-.69,2.67,0,13.5-1.69,18.57-7.25,3.89-4.29,3.87-10.34,3.07-13.63-.22-.89-1-4.07-2.47-4.2-.71-.07-1.51.62-1.82,1.38-.89,2.05,1.49,4.89,3.07,6.8.8.96,1.73,1.91,2.22,2.4.82.8,1.51,1.45,2.42,2.25,2.36,2.07,3.22,2.74,4,3.42,2.47,2.22,4.05,5.07,4.76,7.05,1.42,4,.4,7.78.13,8.87-2.54,10.76,5.05,39.67,7.34,52.08,2.14,11.52,3.22,26.75-1.08,47.74-1,4.88-1.63,9.85-1.83,14.83-1.18,30.16-.96,54.95-.51,72.57.82,31.6,2.47,41.58,3.05,72.94.2,11.16.53,40.36-1.51,77.39-2.16,38.69,6.12,77.99.11,116.26-.2,1.27-.89,5.27,1.36,7.69,2.76,2.96,8.12,1.53,15.32.8,4.87-.51,19.32-.82,28.17.18"
            style={{ pathLength: lateralPathLength}}
          />
        </svg>
      </motion.div>
    </div>
  );
}
